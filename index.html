<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>ZUZU – Presale V4</title>
<meta name="description" content="ZUZU – meme maskot + minimal/ciddi. Parallax + 3D glow. Presale: USDT (BEP20)."/>
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<style>
/* ========= ZUZU V4 – CSS (inline) ========= */
:root{
  --bg:#060b19;--panel:#0e1731;--text:#eaf2ff;--muted:#a9b6d9;
  --glassA:rgba(255,255,255,.08);--glassB:rgba(255,255,255,.03);
  --grad:linear-gradient(135deg,#59a8ff 0%,#2ad1ff 50%,#6a8bff 100%);
  --pri:#6da8ff;--acc:#27d9ff;
}
*{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
a{color:var(--acc);text-decoration:none}

#stars{position:fixed;inset:0;z-index:-3} /* yıldız canvas */
.orb{position:fixed;filter:blur(42px) saturate(125%);opacity:.55;z-index:-2;border-radius:50%}
.orb-a{width:420px;height:420px;background:#2458ff;top:-60px;left:-80px;box-shadow:0 0 140px #2458ff77 inset}
.orb-b{width:520px;height:520px;background:#15d4ff;right:-140px;top:120px;box-shadow:0 0 160px #15d4ff66 inset}
.orb-c{width:360px;height:360px;background:#7b8bff;left:40%;bottom:-120px;box-shadow:0 0 120px #7b8bff55 inset}

.glass{background:linear-gradient(180deg,var(--glassA),var(--glassB));border:1px solid rgba(255,255,255,.09);backdrop-filter:blur(10px);border-radius:18px}

.nav{position:sticky;top:0;z-index:50;display:flex;justify-content:space-between;align-items:center;padding:12px 16px;margin:8px;gap:8px}
.brand{display:flex;gap:10px;align-items:center}
.logo{filter:drop-shadow(0 8px 18px rgba(39,217,255,.45)) drop-shadow(0 0 12px rgba(106,139,255,.4))}
.logo .halo{transform-origin:50% 50%;animation:haloSpin 22s linear infinite, haloPulse 3s ease-in-out infinite}
@keyframes haloSpin{to{transform:rotate(360deg)}}
@keyframes haloPulse{0%,100%{opacity:.65}50%{opacity:1}}

#zuzuBreath{animation:breath 4.5s ease-in-out infinite}
@keyframes breath{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}

.title{font-weight:800;letter-spacing:.5px;font-size:18px}
.lang{background:#0c1430;color:var(--text);border:1px solid rgba(255,255,255,.09);border-radius:12px;padding:9px 10px}
.btn{cursor:pointer;border:0;border-radius:12px;padding:10px 14px;font-weight:800}
.btn-primary{background:#162a5c;color:#fff;border:1px solid rgba(255,255,255,.08)}
.btn-xl{font-size:18px;padding:16px 22px;border-radius:16px}
.btn-gradient{background:var(--grad);box-shadow:0 10px 28px rgba(88,167,255,.35),0 0 60px #38a8ff44}
.btn-chip{background:#0b1635;border:1px solid rgba(255,255,255,.1);color:#cfe2ff;padding:8px 10px;border-radius:10px}

main{max-width:1120px;margin:18px auto 60px;padding:0 14px;display:grid;gap:20px}
.hero,.presale,.about,.tokenomics,.roadmap{padding:22px}
.h1{font-size:46px;margin:.1rem 0 .4rem;text-shadow:0 0 22px rgba(39,217,255,.35),0 0 12px rgba(106,139,255,.45)}
.lead{color:var(--muted);margin:0 0 14px}

.countdown{display:flex;gap:14px;flex-wrap:wrap;margin:10px 0 6px}
.countdown div{background:#0c1633;padding:12px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.08);min-width:90px;text-align:center}
.countdown span{font-weight:900;font-size:28px;display:block}
.countdown label{font-size:12px;color:var(--muted)}

.exchanges{display:flex;gap:12px;flex-wrap:wrap;margin:8px 0}
.badge{display:inline-flex;align-items:center;gap:8px;background:#0b162f;border:1px solid rgba(255,255,255,.08);padding:8px 12px;border-radius:14px;color:#cfe2ff}
.dot{display:inline-block;width:10px;height:10px;border-radius:50%}
.dot-1{background:#3be0b9}.dot-2{background:#55b2ff}.dot-3{background:#7cc0ff}.dot-4{background:#7287ff}.dot-5{background:#48a3ff}

.presale .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:6px}
.field{display:flex;flex-direction:column;gap:6px}
.field input,.field select{background:#0b1430;color:#fff;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px 14px}
.price-line{display:flex;justify-content:space-between;gap:12px;margin:10px 0 12px;color:#cfe2ff}
.chips{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px}

.cards{display:grid;grid-template-columns:2fr 1fr;gap:12px}
.card{background:#0e1a34;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
code{user-select:all;display:block;background:#0b1429;border-radius:8px;padding:10px;margin:6px 0;border:1px solid rgba(255,255,255,.07)}
.help small{color:#9fb5dd}

.audit{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:18px}
.audit .box{background:#0b1430;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px}
.check{color:#48e0b9;font-weight:800}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px;z-index:60}
.modal .inner{background:#0f1838;border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:18px;max-width:520px}
.modal.show{display:flex}

.about p{color:#cfe2ff;margin:6px 0 4px}
.bars{list-style:none;margin:0;padding:0}
.bars li{display:grid;grid-template-columns:120px 1fr 60px;align-items:center;gap:12px;margin:10px 0}
.bars i{display:block;height:12px;border-radius:999px;background:var(--grad);width:var(--v)}
.steps{margin:.4rem 0 0 1rem}
.steps li{margin:.5rem 0;color:#cfe2ff}

.foot{text-align:center;color:#a9b6d9;margin:10px 0 60px}
.socials{display:flex;gap:12px;justify-content:center;margin:8px 0 6px}
.socials a{background:#0c1730;border:1px solid rgba(255,255,255,.08);padding:8px 12px;border-radius:10px}

/* responsive */
@media (max-width:820px){
  .h1{font-size:36px}
  .presale .grid{grid-template-columns:1fr}
  .cards{grid-template-columns:1fr}
  .audit{grid-template-columns:1fr}
}

/* reduce motion */
@media (prefers-reduced-motion:reduce){
  .logo .halo{animation:none}
  #zuzuBreath{animation:none}
  .orb{display:none}
}
</style>
</head>
<body>
<canvas id="stars" aria-hidden="true"></canvas>
<div class="orb orb-a" data-depth="0.08"></div>
<div class="orb orb-b" data-depth="0.14"></div>
<div class="orb orb-c" data-depth="0.18"></div>

<header class="nav glass">
  <div class="brand">
    <!-- Maskot (nefes + halo + göz takip) -->
    <svg id="zuzu" class="logo" viewBox="0 0 260 260" width="44" height="44" aria-label="ZUZU">
      <defs>
        <radialGradient id="halo" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#42e9ff" stop-opacity=".9"/>
          <stop offset="60%" stop-color="#5aa4ff" stop-opacity=".35"/>
          <stop offset="100%" stop-color="#001b46" stop-opacity="0"/>
        </radialGradient>
        <linearGradient id="skin" x1="0" x2="1">
          <stop offset="0" stop-color="#5fd0ff"/>
          <stop offset="1" stop-color="#6a8bff"/>
        </linearGradient>
      </defs>
      <g class="halo"><circle cx="130" cy="130" r="110" fill="url(#halo)"></circle></g>
      <g id="zuzuBreath">
        <circle cx="130" cy="130" r="86" fill="url(#skin)" opacity="0.95"></circle>
        <path d="M75 63 l22 -22 l10 22" fill="#7ce0ff" opacity=".7"/>
        <path d="M175 63 l-22 -22 l-10 22" fill="#7ce0ff" opacity=".7"/>
        <g id="eyes">
          <circle id="eyeL" cx="100" cy="120" r="11" fill="#051436"/>
          <circle id="pupL" cx="100" cy="120" r="6" fill="#23e6ff"/>
          <circle id="eyeR" cx="160" cy="120" r="11" fill="#051436"/>
          <circle id="pupR" cx="160" cy="120" r="6" fill="#23e6ff"/>
        </g>
        <path d="M88 160 Q130 185 172 160" fill="none" stroke="#cfe6ff" stroke-width="10" stroke-linecap="round"/>
      </g>
    </svg>
    <span class="title">ZUZU</span>
  </div>
  <div class="nav-right">
    <select id="lang" class="lang"></select>
    <button id="btnConnect" class="btn btn-primary" data-i18n="connect">Cüzdan Bağla</button>
  </div>
</header>

<main>
  <section class="hero glass" data-depth="0.04">
    <h1 class="h1">ZUZU IS HERE</h1>
    <p class="lead" data-i18n="hero_sub">The next great meme coin has landed</p>

    <div class="countdown" id="countdown">
      <div><span id="d">--</span><label data-i18n="days">Gün</label></div>
      <div><span id="h">--</span><label data-i18n="hours">Saat</label></div>
      <div><span id="m">--</span><label data-i18n="minutes">Dakika</label></div>
      <div><span id="s">--</span><label data-i18n="seconds">Saniye</label></div>
    </div>

    <div class="exchanges">
      <span class="badge"><i class="dot dot-1"></i>MEXC</span>
      <span class="badge"><i class="dot dot-2"></i>gate.io</span>
      <span class="badge"><i class="dot dot-3"></i>BitMart</span>
      <span class="badge"><i class="dot dot-4"></i>LBANK</span>
      <span class="badge"><i class="dot dot-5"></i>BingX</span>
    </div>
  </section>

  <section class="presale glass" data-depth="0.06">
    <h2 data-i18n="presale_title">Ön Satış Aşaması</h2>

    <div class="grid">
      <div class="field">
        <label data-i18n="stage">Aşama</label>
        <select id="stage"></select>
      </div>
      <div class="field">
        <label data-i18n="how_many">Kaç ZUZU?</label>
        <input id="amount" type="number" inputmode="numeric" placeholder="100000"/>
      </div>
    </div>

    <div class="chips">
      <button class="btn-chip" data-val="100000">100k</button>
      <button class="btn-chip" data-val="250000">250k</button>
      <button class="btn-chip" data-val="1000000">1M</button>
    </div>

    <div class="price-line">
      <div><span data-i18n="price">Fiyat</span>: <b id="price">-</b> <span>/ ZUZU (USDT)</span></div>
      <div><span data-i18n="total">Toplam</span>: <b id="total">0.000000</b> <span>USDT</span></div>
    </div>

    <button id="btnBuy" class="btn btn-xl btn-gradient" data-i18n="buy_usdt">USDT (BEP20) ile Satın Al</button>
    <div class="help"><small data-i18n="help1">
      Ödeme USDT (BEP20) ile doğrudan proje kasasına gider. Gas için az miktar BNB gerekir.
      <a href="#" id="openModal">Detay</a>
    </small></div>

    <div class="cards">
      <div class="card">
        <h3 data-i18n="dest_addr">Ödeme Alıcı Adresi</h3>
        <code id="receiver">—</code>
        <button class="btn" id="copyAddr" data-i18n="copy">Kopyala</button>
      </div>
      <div class="card">
        <h3>QR</h3>
        <canvas id="qr" width="128" height="128"></canvas>
      </div>
    </div>

    <div class="audit">
      <div class="box">
        <h4>Mini Audit</h4>
        <ul>
          <li><span class="check">✓</span> Sözleşme: USDT (BEP20)</li>
          <li><span class="check">✓</span> Transfer → <code id="rcvMini">—</code></li>
          <li><span class="check">✓</span> Non-custodial, direkt kasaya</li>
        </ul>
      </div>
      <div class="box">
        <h4>Şeffaflık</h4>
        <p>Satın alışlar <b>USDT → Receiver</b> olarak zincire kaydolur.  
        <a href="/admin.html" target="_blank">Admin Panel</a> üzerinden son işlemleri görebilirsin.</p>
      </div>
    </div>
  </section>

  <section class="about glass" data-depth="0.03">
    <h2 data-i18n="about">Hakkında</h2>
    <p data-i18n="about_text">
      ZUZU; meme maskot enerjisiyle minimal & ciddi duruşu birleştiren, topluluk odaklı bir coindir.
      Presale ödemeleri USDT (BEP20) ile doğrudan kasaya gider. CEX başvuruları presale bitiminde yapılır.
    </p>
  </section>

  <section class="tokenomics glass" data-depth="0.05">
    <h2>Tokenomics</h2>
    <ul class="bars">
      <li><span>Presale</span><i style="--v:45%"></i><b>45%</b></li>
      <li><span>Liquidity</span><i style="--v:25%"></i><b>25%</b></li>
      <li><span>Marketing</span><i style="--v:15%"></i><b>15%</b></li>
      <li><span>Team</span><i style="--v:10%"></i><b>10%</b></li>
      <li><span>Airdrop</span><i style="--v:5%"></i><b>5%</b></li>
    </ul>
  </section>

  <section class="roadmap glass" data-depth="0.04">
    <h2 data-i18n="roadmap">Yol Haritası</h2>
    <ol class="steps">
      <li data-i18n="rm1"><b>Q3 2025</b> – Website v4, Presale</li>
      <li data-i18n="rm2"><b>Q4 2025</b> – DEX listeleme, CEX başvuruları</li>
      <li data-i18n="rm3"><b>Q1 2026</b> – CEX listeleri (MEXC vb.), staking/utility</li>
    </ol>
  </section>
</main>

<footer class="foot">
  <div class="socials">
    <a id="tw" href="#" target="_blank" rel="noopener">Twitter</a>
    <a id="tg" href="#" target="_blank" rel="noopener">Telegram</a>
    <a id="dc" href="#" target="_blank" rel="noopener">Discord</a>
  </div>
  <div class="copy">© <span id="year"></span> ZUZU • All rights reserved.</div>
</footer>

<!-- Funds Modal -->
<div class="modal" id="modal">
  <div class="inner">
    <h3>Funds go to Treasury</h3>
    <p>Bu presale’de yaptığınız ödemeler, doğrudan ZUZU projesinin kasasına (receiver) USDT (BEP20) olarak gider.
       Bu yöntem; merkezi bir cüzdanda beklemek yerine, **non-custodial** ve zincir üstü şeffaflık sağlar.</p>
    <button class="btn" id="closeModal">Kapat</button>
  </div>
</div>

<!-- ethers -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<script>
/* ===== ZUZU V4 – JS (inline) ===== */
const $=(q,el=document)=>el.querySelector(q);
const $$=(q,el=document)=>Array.from(el.querySelectorAll(q));
const fmt=(n,d=6)=>Number(n||0).toLocaleString(undefined,{minimumFractionDigits:d,maximumFractionDigits:d});

let CFG=null, provider,signer,account,currentStage=0, lang='tr', motionOK=true;

/* ---------- CONFIG (burayı düzenle) ---------- */
const EMBED_CONFIG = {
  "PROJECT": {
    "name": "ZUZU",
    "siteUrl": "https://zuz ucoin.xyz".replace(' ',''),
    "twitter": "https://twitter.com/",
    "telegram":"https://t.me/",
    "discord":"https://discord.com/"
  },
  "PRESALE": {
    "receiver": "0x69014a76Ee25c8B73dAe9044dfcAd7356fe74bC3",  // USDT BEP20 alıcı
    "usdtToken":"0x55d398326f99059fF775485246999027B3197955",   // BSC-USDT
    "stages":[
      {"name":"Stage 1","priceUsdt":0.000002},
      {"name":"Stage 2","priceUsdt":0.000003},
      {"name":"Stage 3","priceUsdt":0.000004},
      {"name":"Stage 4","priceUsdt":0.000005}
    ],
    "endDate":"2025-09-30T21:00:00+03:00"
  },
  "ADMIN_ADDRESS":"0x69014a76Ee25c8B73dAe9044dfcAd7356fe74bC3"
};
/* -------------------------------------------- */

const I18N={
 tr:{connect:'Cüzdan Bağla',hero_sub:'Bir sonraki büyük meme coini iniş yaptı',days:'Gün',hours:'Saat',minutes:'Dakika',seconds:'Saniye',presale_title:'Ön Satış Aşaması',stage:'Aşama',how_many:'Kaç ZUZU?',price:'Fiyat',total:'Toplam',buy_usdt:'USDT (BEP20) ile Satın Al',help1:'Ödeme USDT (BEP20) ile doğrudan proje kasasına gider. Gas için az miktar BNB gerekir.',dest_addr:'Ödeme Alıcı Adresi',copy:'Kopyala',about:'Hakkında',about_text:'ZUZU; meme maskot enerjisiyle minimal ve ciddi duruşu birleştiren topluluk coinidir. Presale USDT (BEP20) ile direkt kasaya gider. CEX başvuruları presale bitiminde.'},
 en:{connect:'Connect Wallet',hero_sub:'The next great meme coin has landed',days:'Days',hours:'Hours',minutes:'Minutes',seconds:'Seconds',presale_title:'Presale',stage:'Stage',how_many:'How many ZUZU?',price:'Price',total:'Total',buy_usdt:'Buy with USDT (BEP20)',help1:'Payment goes directly to the project treasury (BEP20). Small BNB for gas required.',dest_addr:'Receiving Address',copy:'Copy',about:'About',about_text:'ZUZU blends meme energy with a minimal & serious vibe. Presale payments go to treasury in USDT (BEP20). CEX listings will be applied post-presale.'},
 pt:{connect:'Conectar Carteira',hero_sub:'A próxima grande meme coin chegou',days:'Dias',hours:'Horas',minutes:'Minutos',seconds:'Segundos',presale_title:'Pré-venda',stage:'Etapa',how_many:'Quantos ZUZU?',price:'Preço',total:'Total',buy_usdt:'Comprar com USDT (BEP20)',help1:'O pagamento vai direto ao tesouro do projeto (BEP20). Precisa um pouco de BNB para taxas.',dest_addr:'Endereço de Recebimento',copy:'Copiar',about:'Sobre',about_text:'ZUZU combina energia de meme com visual minimalista & sério.'},
 ru:{connect:'Подключить кошелек',hero_sub:'Новая великая мем-монета приземлилась',days:'Дней',hours:'Часов',minutes:'Минут',seconds:'Секунд',presale_title:'Предпродажа',stage:'Этап',how_many:'Сколько ZUZU?',price:'Цена',total:'Итого',buy_usdt:'Купить USDT (BEP20)',help1:'Платёж идёт напрямую в казну проекта (BEP20). Нужна небольшая сумма BNB на газ.',dest_addr:'Адрес получателя',copy:'Копировать',about:'О проекте',about_text:'ZUZU сочетает энергию мемов с минималистичным стилем.'},
 zh:{connect:'连接钱包',hero_sub:'下一款伟大的梗币已降临',days:'天',hours:'时',minutes:'分',seconds:'秒',presale_title:'预售',stage:'阶段',how_many:'购买多少 ZUZU？',price:'价格',total:'总计',buy_usdt:'用 USDT (BEP20) 购买',help1:'付款直接进入项目金库 (BEP20)。需要少量 BNB 作为 gas。',dest_addr:'收款地址',copy:'复制',about:'关于',about_text:'ZUZU 将梗文化与极简但严肃的风格结合。'},
 hi:{connect:'वॉलेट कनेक्ट करें',hero_sub:'अगला बड़ा मीम कॉइन आ चुका है',days:'दिन',hours:'घंटे',minutes:'मिनट',seconds:'सेकंड',presale_title:'प्रीसेल',stage:'चरण',how_many:'कितना ZUZU?',price:'कीमत',total:'कुल',buy_usdt:'USDT (BEP20) से खरीदें',help1:'पेमेंट सीधे प्रोजेक्ट ट्रेज़री (BEP20) में जाता है। गैस के लिए थोड़ा BNB चाहिए।',dest_addr:'रिसीविंग एड्रेस',copy:'कॉपी',about:'परिचय',about_text:'ZUZU मीम ऊर्जा को मिनिमल और गंभीर स्टाइल के साथ जोड़ता है।'}
};

function applyLang(lc){lang=lc; $$("[data-i18n]").forEach(el=>{const k=el.dataset.i18n; if(I18N[lc][k]) el.textContent=I18N[lc][k];}); $('#btnConnect').textContent=I18N[lc].connect; $('#btnBuy').textContent=I18N[lc].buy_usdt;}

async function loadConfig(){
  // config.json varsa oku, yoksa embed kullan
  try{
    const r=await fetch('config.json?'+Date.now());
    if(r.ok){ CFG=await r.json(); return;}
  }catch(_){}
  CFG=EMBED_CONFIG;
}

function runCountdown(endISO){
  const end=new Date(endISO).getTime();
  const tick=()=>{
    const now=Date.now(); let s=Math.max(0,Math.floor((end-now)/1000));
    const d=Math.floor(s/86400); s%=86400; const h=Math.floor(s/3600); s%=3600; const m=Math.floor(s/60); s%=60;
    $('#d').textContent=d; $('#h').textContent=h; $('#m').textContent=m; $('#s').textContent=s;
  }; tick(); setInterval(tick,1000);
}

function fillBasics(){
  $('#year').textContent=new Date().getFullYear();
  $('#tw').href=CFG.PROJECT.twitter; $('#tg').href=CFG.PROJECT.telegram; $('#dc').href=CFG.PROJECT.discord;
  $('#receiver').textContent=CFG.PRESALE.receiver; $('#rcvMini').textContent=short(CFG.PRESALE.receiver);
  const langSel=$('#lang'); langSel.innerHTML='';
  [['tr','TR'],['en','EN'],['pt','PT'],['ru','RU'],['zh','中文'],['hi','HI']].forEach(([v,t])=>{
    const o=document.createElement('option'); o.value=v; o.textContent=t; langSel.appendChild(o);
  }); langSel.value='tr';
}
function short(a){return a.slice(0,6)+'…'+a.slice(-4);}

function buildStages(){
  const sel=$('#stage'); sel.innerHTML='';
  CFG.PRESALE.stages.forEach((st,i)=>{const o=document.createElement('option');o.value=i;o.textContent=`${st.name} — ${st.priceUsdt} USDT / ZUZU`; sel.appendChild(o);});
  currentStage=0; sel.value=0; $('#price').textContent=CFG.PRESALE.stages[0].priceUsdt.toFixed(6);
}
function updateCalc(){
  const z=Number($('#amount').value||0);
  const p=CFG.PRESALE.stages[currentStage].priceUsdt;
  $('#total').textContent=fmt(z*p,6);
}

async function connect(){
  if(!window.ethereum) return alert('MetaMask / TrustWallet gerekli.');
  provider=new ethers.providers.Web3Provider(window.ethereum,'any');
  await provider.send('eth_requestAccounts',[]); signer=provider.getSigner(); account=await signer.getAddress();
  const net=await provider.getNetwork();
  if(net.chainId!==56){
    try{await provider.send('wallet_switchEthereumChain',[{chainId:'0x38'}]);}
    catch(e){if(e.code===4902){await provider.send('wallet_addEthereumChain',[{chainId:'0x38',chainName:'BNB Smart Chain',nativeCurrency:{name:'BNB',symbol:'BNB',decimals:18},rpcUrls:['https://bsc-dataseed.binance.org/'],blockExplorerUrls:['https://bscscan.com']}]);}}
  }
  $('#btnConnect').textContent=short(account);
}
async function buy(){
  const z=Number($('#amount').value||0); if(!z) return alert('Miktar gir.');
  if(!window.ethereum) return alert('MetaMask / TrustWallet gerekli.');
  if(!provider) await connect();
  const price=CFG.PRESALE.stages[currentStage].priceUsdt;
  const amountUsdt=z*price;
  const erc20Abi=["function transfer(address to,uint256 amount) returns (bool)"];
  const usdt=new ethers.Contract(CFG.PRESALE.usdtToken,erc20Abi,signer);
  const wei=ethers.utils.parseUnits(amountUsdt.toFixed(18),18);
  try{const tx=await usdt.transfer(CFG.PRESALE.receiver,wei); alert('İşlem gönderildi.\\nTx: '+tx.hash);}
  catch(e){console.error(e);alert('İşlem iptal edildi veya hata.');}
}

function makeQR(text){
  const c=$('#qr'),ctx=c.getContext('2d');
  ctx.fillStyle='#081022'; ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle='#7fd4ff'; ctx.font='bold 12px monospace';
  const lines=text.match(/.{1,16}/g)||[text]; lines.slice(0,8).forEach((ln,i)=>ctx.fillText(ln,6,16+i*15));
}

// parallax + göz takip + yıldızlar
function parallaxInit(){
  const layers=$$('[data-depth]');
  const onMove=(x,y)=>{
    const cx=innerWidth/2, cy=innerHeight/2; const dx=(x-cx)/cx, dy=(y-cy)/cy;
    layers.forEach(el=>{const d=parseFloat(el.dataset.depth||0.05); el.style.transform=`translate3d(${dx*d*-30}px,${dy*d*-30}px,0)`;});
    const box=$('#zuzu').getBoundingClientRect(); const mx=x-box.left,my=y-box.top; const cx2=box.width/2,cy2=box.height/2;
    const vx=(mx-cx2)/cx2, vy=(my-cy2)/cy2; const r=6;
    $('#pupL').setAttribute('cx',100+r*vx); $('#pupL').setAttribute('cy',120+r*vy);
    $('#pupR').setAttribute('cx',160+r*vx); $('#pupR').setAttribute('cy',120+r*vy);
  };
  window.addEventListener('mousemove',e=>onMove(e.clientX,e.clientY),{passive:true});
  window.addEventListener('touchmove',e=>{const t=e.touches[0]; if(t) onMove(t.clientX,t.clientY);},{passive:true});
}
function starsInit(){
  const c=$('#stars'),ctx=c.getContext('2d'); let w,h,stars=[];
  function resize(){w=c.width=innerWidth; h=c.height=innerHeight; stars=Array.from({length:Math.min(220,Math.floor(w*h/8000))},()=>({x:Math.random()*w,y:Math.random()*h,s:Math.random()*1.2+0.2,sp:Math.random()*0.3+0.05}));}
  function draw(){ctx.clearRect(0,0,w,h); ctx.fillStyle='#fff';
    stars.forEach(st=>{ctx.globalAlpha=st.s; ctx.fillRect(st.x,st.y,1.2,1.2); st.y+=st.sp; if(st.y>h){st.y=0; st.x=Math.random()*w;}});
    requestAnimationFrame(draw);
  } resize(); draw(); addEventListener('resize',resize);
}

document.addEventListener('DOMContentLoaded', async ()=>{
  try{motionOK=!matchMedia('(prefers-reduced-motion: reduce)').matches;}catch(_){}
  await loadConfig();
  fillBasics(); buildStages(); updateCalc(); runCountdown(CFG.PRESALE.endDate); makeQR(CFG.PRESALE.receiver);
  // dil
  $('#lang').addEventListener('change',e=>applyLang(e.target.value)); applyLang('tr');
  // inputs
  $('#stage').addEventListener('change',e=>{currentStage=+e.target.value; $('#price').textContent=CFG.PRESALE.stages[currentStage].priceUsdt.toFixed(6); updateCalc();});
  $('#amount').addEventListener('input',updateCalc);
  $$('.btn-chip').forEach(b=>b.addEventListener('click',()=>{$('#amount').value=b.dataset.val; updateCalc();}));
  $('#btnConnect').addEventListener('click',connect);
  $('#btnBuy').addEventListener('click',buy);
  $('#copyAddr').addEventListener('click',()=>{navigator.clipboard.writeText(CFG.PRESALE.receiver); const b=$('#copyAddr'); b.textContent=I18N[lang].copy+' ✓'; setTimeout(()=>b.textContent=I18N[lang].copy,1200);});
  // modal
  $('#openModal').addEventListener('click',e=>{e.preventDefault(); $('#modal').classList.add('show');});
  $('#closeModal').addEventListener('click',()=>$('#modal').classList.remove('show'));
  // parallax + stars
  parallaxInit(); starsInit();
});
</script>
</body>
</html>
