<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ZUZUCOIN — Stake Simulator</title>
<meta name="theme-color" content="#0e1522">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<!-- TON UI -->
<script src="https://unpkg.com/@tonconnect/ui@2.0.9/dist/tonconnect-ui.min.js"></script>
<style>
:root{
  --bg:#0C1320;--panel:#0f1828;--muted:#8aa2c9;--txt:#e8f1ff;--chip:#1c2840;
  --pri:#6a8cff;--pri2:#9aaeff;--ok:#16d2a6;--warn:#ffb347;
  --bd:#1b2a49;--bd2:#21345a;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--txt);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
a{color:#b8c7ff;text-decoration:none}
img{max-width:100%;display:block}
.z-container{width:min(1100px,92%);margin:0 auto}
.z-nav{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,rgba(10,15,25,.9),rgba(10,15,25,.75));backdrop-filter:saturate(1.2) blur(8px);border-bottom:1px solid #16223a}
.z-nav-inner{display:flex;align-items:center;justify-content:space-between;padding:.7rem 0;gap:12px}
.brand{display:flex;gap:.6rem;align-items:center;font-weight:800}
.brand img{width:36px;height:36px}
.z-btn{display:inline-flex;align-items:center;gap:.5rem;border:0;border-radius:12px;padding:.65rem 1rem;font-weight:700;cursor:pointer;white-space:nowrap}
.z-btn-primary{background:linear-gradient(135deg,var(--pri),var(--pri2));color:#08101d}
.z-btn-ghost{background:#12203a;color:#cfe2ff;border:1px solid #1c2d4a}
.badge{background:#172748;border:1px solid #263a63;color:#9eb9ff;padding:.3rem .55rem;border-radius:999px;font-size:.8rem}
.z-section{padding:28px 0}
h1{margin:.2rem 0 .4rem;font-size:clamp(1.6rem,3.8vw,2.3rem)}
.lead{color:#bfd2ff}
.grid-2{display:grid;grid-template-columns:1.05fr .95fr;gap:18px}
@media(max-width:950px){.grid-2{grid-template-columns:1fr}}
.card{background:var(--panel);border:1px solid var(--bd);border-radius:16px;padding:16px}
.input,select{width:100%;padding:.7rem;border-radius:12px;background:#0f1c33;border:1px solid #23395d;color:var(--txt)}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:760px){.row{grid-template-columns:1fr}}
.stat3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
.stat{background:#0f1a30;border:1px solid var(--bd2);border-radius:14px;padding:12px}
.stat .label{color:#90a9d6}
.progress{height:10px;border-radius:8px;background:#10213a;overflow:hidden;border:1px solid #213a65}
.progress > span{display:block;height:100%;background:linear-gradient(90deg,#24d1a5,#6a8cff)}
.tbl{width:100%;border-collapse:collapse;margin-top:10px}
.tbl th,.tbl td{padding:8px;border-bottom:1px solid #1b2c4d;text-align:left}
.tbl th{color:#9cb6e6;font-weight:700}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
@media(max-width:900px){.grid-3{grid-template-columns:1fr}}
.small{color:#96acd6;font-size:.92rem}
.center{text-align:center}
.footer{border-top:1px solid #15243f;color:#9cb6e6;padding:18px 0;margin-top:24px}
.nft-chip{display:inline-flex;align-items:center;gap:8px;background:#0f1c33;border:1px solid #20365b;border-radius:999px;padding:8px 10px}
.nft-chip img{width:28px;height:28px;object-fit:contain}
.hint{color:#9db3db;font-size:.9rem}
</style>
</head>
<body>

<header class="z-nav">
  <div class="z-container z-nav-inner">
    <a class="brand" href="index.html">
      <img src="assets/images/logo.png" alt="ZUZU">
      <span>ZUZUCOIN — Stake Simulator</span>
    </a>
    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <a class="z-btn z-btn-ghost" href="index.html">← Back to Home</a>
      <button id="connectBtn" class="z-btn z-btn-primary">Connect Wallet</button>
    </div>
  </div>
</header>

<main class="z-section">
  <div class="z-container">
    <div class="badge">Visual • No blockchain write</div>
    <h1>Stake & Claim NFT Rewards — Simulator</h1>
    <p class="lead">Enter your amount and choose a lock period + NFT boost. We’ll simulate total rewards, monthly claim schedule and boosted APY.</p>

    <div class="grid-2" style="margin-top:14px">
      <!-- Left: Inputs -->
      <div class="card">
        <h3>Parameters</h3>
        <div class="row">
          <div>
            <label>Amount (ZUZU)</label>
            <input type="text" id="simAmount" class="input" placeholder="e.g., 10,000" value="10000">
          </div>
          <div>
            <label>Lock Period</label>
            <select id="simDuration" class="input">
              <option value="30">30 days (12% APY)</option>
              <option value="90">90 days (24% APY)</option>
              <option value="180">180 days (40% APY)</option>
              <option value="365">365 days (65% APY)</option>
              <option value="540">540 days (85% APY)</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div>
            <label>Have ZUZU NFT?</label>
            <select id="simNft" class="input">
              <option value="0">None</option>
              <option value="5">ZUZU Hero (+5%)</option>
              <option value="8">ZUZU Rogue (+8%)</option>
              <option value="10">ZUZU Berserker (+10%)</option>
              <option value="6">ZUZU Hacker (+6%)</option>
              <option value="9">ZUZU Sorceress (+9%)</option>
              <option value="7">ZUZU Warrior (+7%)</option>
              <option value="5">ZUZU Maiden (+5%)</option>
              <option value="9">ZUZU Scientist (+9%)</option>
              <option value="12">ZUZU Titan (+12%)</option>
            </select>
          </div>
          <div>
            <label>Early Badge</label>
            <select id="simEarly" class="input">
              <option value="0">None</option>
              <option value="3">Badge +3%</option>
              <option value="5">Badge+ +5%</option>
            </select>
          </div>
        </div>

        <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
          <button id="btnCalc" class="z-btn z-btn-primary">Calculate</button>
          <button id="btnReset" class="z-btn z-btn-ghost">Reset Claim</button>
        </div>

        <div class="small hint" style="margin-top:8px">
          *This page is a visual simulator for education. Real staking, claiming and NFT rewards will be executed on the live dApp.
        </div>
      </div>

      <!-- Right: Stats -->
      <div class="card">
        <h3>Results</h3>
        <div class="stat3">
          <div class="stat">
            <div class="label">Total Return</div>
            <div id="resTotal" style="font-weight:800;margin-top:4px">0 ZUZU</div>
          </div>
          <div class="stat">
            <div class="label">Monthly Avg</div>
            <div id="resMonthly" style="font-weight:800;margin-top:4px">0 ZUZU</div>
          </div>
          <div class="stat">
            <div class="label">Boosted APY</div>
            <div id="resBoost" style="font-weight:800;margin-top:4px">0%</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="label">Progress (simulated)</div>
          <div class="progress"><span id="prog" style="width:0%"></span></div>
          <div class="small" id="progText" style="margin-top:6px">0% of lock elapsed</div>
        </div>

        <div style="margin-top:12px">
          <div class="nft-chip">
            <img src="assets/images/mask/0.png" alt="ZUZU NFT">
            <div>
              <div style="font-weight:700">ZUZU Maskot NFT Boost</div>
              <div class="small">Holding NFT increases APY as shown above.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CLAIM SCHEDULE -->
    <div class="card" style="margin-top:16px">
      <h3>Claim Schedule</h3>
      <p class="small">Rewards are linearly unlocked each month of the lock period in this simulator. Use the buttons to simulate claiming.</p>
      <div class="grid-3">
        <div class="stat">
          <div class="label">Claimable (simulated)</div>
          <div id="resClaimable" style="font-weight:800;margin-top:4px">0 ZUZU</div>
        </div>
        <div class="stat">
          <div class="label">Claimed</div>
          <div id="resClaimed" style="font-weight:800;margin-top:4px">0 ZUZU</div>
        </div>
        <div class="stat">
          <div class="label">Remaining</div>
          <div id="resRemaining" style="font-weight:800;margin-top:4px">0 ZUZU</div>
        </div>
      </div>

      <div style="display:flex;gap:10px;margin:12px 0;flex-wrap:wrap">
        <button id="btnAdvanceMonth" class="z-btn z-btn-ghost">Advance 1 Month →</button>
        <button id="btnClaimNow" class="z-btn z-btn-primary">Claim Now</button>
      </div>

      <table class="tbl" id="tbl">
        <thead><tr><th>#</th><th>Unlock</th><th>Amount (ZUZU)</th><th>Status</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="footer z-container center">
      <div>© ZUZUCOIN 2025 — <a href="index.html">Back to Main</a> • <a target="_blank" href="https://thirdweb.com/team/enejomble35/Zuzu-Maskot-Drop-28b60a">Collection</a></div>
    </div>

  </div>
</main>

<script>
/** ====== CONFIG (aynı verilerle eşleşsin) ====== */
const CONFIG = {
  contractAddress:"0xF2bbbEcB417725813BF5E940d678793fACDa9729",
  collectionUrl:"https://thirdweb.com/team/enejomble35/Zuzu-Maskot-Drop-28b60a/contract/polygon/0xF2bbbEcB417725813BF5E940d678793fACDa9729/nfts",
  apyMap:{30:12,90:24,180:40,365:65,540:85}
};

/** ====== Wallet Connect (MetaMask / Phantom / TON) ====== */
const btn = document.getElementById("connectBtn");
let tonUi;
try{
  tonUi = new TON_CONNECT_UI.TonConnectUI({ manifestUrl: "/tonconnect-manifest.json" });
}catch(e){}
btn.addEventListener("click", async ()=>{
  if (window.ethereum){
    try{ await window.ethereum.request({method:"eth_requestAccounts"});
      btn.textContent="MetaMask ✓"; return;
    }catch(e){}
  }
  if (window.solana && window.solana.isPhantom){
    try{ await window.solana.connect(); btn.textContent="Phantom ✓"; return;}catch(e){}
  }
  if (tonUi){
    try{ await tonUi.openModal(); btn.textContent="TON ✓"; return;}catch(e){}
  }
  alert("Please install MetaMask, Phantom or TON Wallet.");
});

/** ====== Simulator Logic ====== */
const $ = (s)=>document.querySelector(s);
const amountEl = $("#simAmount");
const durationEl = $("#simDuration");
const nftEl = $("#simNft");
const earlyEl = $("#simEarly");

// results
const resTotal = $("#resTotal");
const resMonthly = $("#resMonthly");
const resBoost = $("#resBoost");
const progBar = $("#prog");
const progText = $("#progText");

const claimableEl = $("#resClaimable");
const claimedEl   = $("#resClaimed");
const remainingEl = $("#resRemaining");
const tbody       = $("#tbl tbody");

let state = {
  total:0, months:0, monthly:0,
  monthNow:0, // kaç ay geçti (simülasyon)
  claimed:0
};

function number(x){ return parseFloat((x||"0").toString().replace(/[^\d.]/g,""))||0; }
function fmt(x){ return (x||0).toLocaleString(undefined,{maximumFractionDigits:2}); }

function recalc(){
  const a  = number(amountEl.value);
  const d  = parseInt(durationEl.value,10)||0;
  const nft= number(nftEl.value);
  const eb = number(earlyEl.value);
  const base = CONFIG.apyMap[d]||0;
  const tb = nft + eb;
  const gross = a * ((base + tb)/100) * (d/365);
  const months = Math.max(1, Math.round(d/30));
  const m = gross / months;

  state.total = gross;
  state.months = months;
  state.monthly = m;
  state.monthNow = 0;
  state.claimed = 0;

  resTotal.textContent   = fmt(gross) + " ZUZU";
  resMonthly.textContent = fmt(m) + " ZUZU";
  resBoost.textContent   = (base + tb).toFixed(0) + "%";

  progBar.style.width = "0%";
  progText.textContent = "0% of lock elapsed";

  renderSchedule();
  refreshClaimSummary();
}

function renderSchedule(){
  let html = "";
  for(let i=1;i<=state.months;i++){
    html += `<tr data-i="${i}">
      <td>${i}</td>
      <td>Month ${i}</td>
      <td>${fmt(state.monthly)}</td>
      <td class="status">Locked</td>
    </tr>`;
  }
  tbody.innerHTML = html;
}

function refreshClaimSummary(){
  const unlocked = Math.min(state.monthNow, state.months) * state.monthly;
  const claimable = Math.max(0, unlocked - state.claimed);
  const remaining = Math.max(0, state.total - state.claimed);

  claimableEl.textContent = fmt(claimable) + " ZUZU";
  claimedEl.textContent   = fmt(state.claimed) + " ZUZU";
  remainingEl.textContent = fmt(remaining) + " ZUZU";

  // table statuses
  [...tbody.querySelectorAll("tr")].forEach((tr,idx)=>{
    const i = idx+1;
    const st = tr.querySelector(".status");
    if (i <= state.claimed / state.monthly) st.textContent = "Claimed";
    else if (i <= state.monthNow) st.textContent = "Unlocked";
    else st.textContent = "Locked";
  });

  const p = Math.min(100, (state.monthNow/state.months)*100);
  progBar.style.width = p + "%";
  progText.textContent = p.toFixed(0) + "% of lock elapsed";
}

// advance 1 month (simülasyon)
$("#btnAdvanceMonth").addEventListener("click", ()=>{
  state.monthNow = Math.min(state.months, state.monthNow + 1);
  refreshClaimSummary();
});

// claim now (simülasyon)
$("#btnClaimNow").addEventListener("click", ()=>{
  const unlocked = Math.min(state.monthNow, state.months) * state.monthly;
  const claimable = Math.max(0, unlocked - state.claimed);
  if (claimable <= 0) { alert("Nothing to claim yet."); return; }
  state.claimed += claimable;
  refreshClaimSummary();
});

// calc + reset
$("#btnCalc").addEventListener("click", recalc);
$("#btnReset").addEventListener("click", ()=>{
  state.monthNow = 0; state.claimed = 0; refreshClaimSummary();
});

// initial
recalc();
</script>
</body>
</html>
